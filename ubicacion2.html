<!DOCTYPE html>
<html>
<head>
    <title>Calculadora de Distancia entre Ciudades con la Forma 2</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            background-color: #f0f0f0;
            margin: 0;
            padding: 0;
        }

        h1 {
            background-color: #3498db;
            color: white;
            padding: 20px;
        }

        label {
            display: block;
            margin-top: 20px;
            font-weight: bold;
        }

        input[type="text"] {
            width: 300px;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
        }

        button {
            background-color: #3498db;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

        button:hover {
            background-color: #258cd1;
        }

        #resultado {
            margin-top: 20px;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <h1>Calculadora de Distancia entre Ciudades con la Forma 2</h1>

    <form id="cityForm">
        <label for="ciudad1">Ciudad 1:</label>
        <input type="text" id="ciudad1" placeholder="Ingrese la ciudad 1">
        <br>

        <label for="pais1">País 1:</label>
        <input type="text" id="pais1" placeholder="Ingrese el país 1">
        <br>

        <label for="ciudad2">Ciudad 2:</label>
        <input type="text" id="ciudad2" placeholder="Ingrese la ciudad 2">
        <br>

        <label for="pais2">País 2:</label>
        <input type="text" id="pais2" placeholder="Ingrese el país 2">
        <br>

        <button type="button" onclick="calcularDistancia_1()">Calcular Distancia</button>
    </form>

    <div id="resultado"></div>

    <script>
        function calcularDistancia_1() {
            var ciudad1 = document.getElementById("ciudad1").value;
            var pais1 = document.getElementById("pais1").value;
            var ciudad2 = document.getElementById("ciudad2").value;
            var pais2 = document.getElementById("pais2").value;

            // Realizar solicitudes HTTP a la API de Nominatim
            var url1 = "https://nominatim.openstreetmap.org/search.php?q=" + ciudad1 + ", " + pais1 + "&format=jsonv2";
            var url2 = "https://nominatim.openstreetmap.org/search.php?q=" + ciudad2 + ", " + pais2 + "&format=jsonv2";

            fetch(url1)
                .then(response => response.json())
                .then(data1 => {
                    fetch(url2)
                        .then(response => response.json())
                        .then(data2 => {
                            var lat1 = parseFloat(data1[0]["lat"]);
                            var lon1 = parseFloat(data1[0]["lon"]);
                            var lat2 = parseFloat(data2[0]["lat"]);
                            var lon2 = parseFloat(data2[0]["lon"]);

                            //Calcular la distancia utilizando la fórmula de Haversine

                            var R = 6371; // Radio de la Tierra en kilómetros
                            var dLat = (lat2 - lat1) * (Math.PI / 180);
                            var dLon = (lon2 - lon1) * (Math.PI / 180);
                            var a = Math.sin(dLat / 2) * Math.sin(dLat / 2) + Math.cos(lat1 * (Math.PI / 180)) * Math.cos(lat2 * (Math.PI / 180)) * Math.sin(dLon / 2) * Math.sin(dLon / 2);
                            var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));
                            var distancia = R * c;

                            document.getElementById("resultado").innerHTML = "La distancia entre " + ciudad1 + ", " + pais1 + " y " + ciudad2 + ", " + pais2 + " es: " + distancia.toFixed(2) + " km";
                        })
                        .catch(error => console.error(error));
                })
                .catch(error => console.error(error));
        }
    </script>
</body>
</html>

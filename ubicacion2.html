<!DOCTYPE html>
<html>
<head>
    <title>Calculadora de Distancia entre Ciudades</title>
</head>
<body>
    <h1>Calculadora de Distancia entre Ciudades</h1>

    <label for="ciudad1">Ciudad 1:</label>
    <input type="text" id="ciudad1" placeholder="Ingrese la ciudad 1">
    <br> 

    <label for="ciudad2">Ciudad 2:</label>
    <input type="text" id="ciudad2" placeholder="Ingrese la ciudad 2">
    <br>

    <button onclick="calcularDistancia()">Calcular Distancia</button>

    <div id="resultado"></div>

    <script >
        
        function calcularDistancia_1() {
            var ciudad1 = document.getElementById("ciudad1").value;
            var ciudad2 = document.getElementById("ciudad2").value;

            // Realizar solicitudes HTTP a la API de Nominatim
            var url1 = "https://nominatim.openstreetmap.org/search.php?q=" + ciudad1 + "&format=jsonv2";
            var url2 = "https://nominatim.openstreetmap.org/search.php?q=" + ciudad2 + "&format=jsonv2";

            fetch(url1)
                .then(response => response.json())
                .then(data1 => {
                    fetch(url2)
                        .then(response => response.json())
                        .then(data2 => {
                            var lat1 = parseFloat(data1[0]["lat"]);
                            var lon1 = parseFloat(data1[0]["lon"]);
                            var lat2 = parseFloat(data2[0]["lat"]);
                            var lon2 = parseFloat(data2[0]["lon"]);

                            //Calcular la distancia utilizando la fórmula de Haversine

                            var R = 6371; // Radio de la Tierra en kilómetros
                            var dLat = (lat2 - lat1) * (Math.PI / 180);
                            var dLon = (lon2 - lon1) * (Math.PI / 180);
                            var a = Math.sin(dLat / 2) * Math.sin(dLat / 2) + Math.cos(lat1 * (Math.PI / 180)) * Math.cos(lat2 * (Math.PI / 180)) * Math.sin(dLon / 2) * Math.sin(dLon / 2);
                            var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));
                            var distancia = R * c;


                            document.getElementById("resultado").innerHTML = "La distancia entre " + ciudad1 + " y " + ciudad2 + " es: " + distancia.toFixed(2) + " km";
                        })
                        .catch(error => console.error(error));
                })
                .catch(error => console.error(error));
        }
    </script>
</body>
</html>
